<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset = "utf-8">
        <meta name = "viewport" content = "width=device-width, initial-scale=1">
        <title>View Account</title>

        <link href = "https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel = "stylesheet">       
        <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Montserrat:wght@500&display=swap" rel="stylesheet">
        <link href = "css/style.css" rel = "stylesheet">

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"></script>
        <script src = "/js/account.js" type = "module"></script>
    </head>

    <body class = "bg-home">
        {{>navbar adminflag = true home-page = false account-page = true}}
        
        <div class = "m-4">
            <h1 class = "fs-1 fw-bolder text-center text-info text-muted">ACCOUNTS</h1>
        </div>

        <div class = "modal" id = "edit-account-status-modal">
            <div class = "modal-dialog modal-dialog-centered">
                <div class = "bg-primary border border-white border-3 modal-content">
                    <div class = "text-end">
                        <button class = "btn fs-5 fw-bold m-1 shadow-none text-white" data-bs-dismiss = "modal">X</button>
                    </div>
                    
                    <form id = "edit-account-status-form">
                        <div class = "bg-secondary p-2 text-center">
                            <input type = hidden id = "edit-account-status-form-id" name = "accountId">
                            <h4 id= "edit-account-status-form-name" class = "fw-bold pt-2 status-name text-primary">Angeli Dianne Mata</h4>
                            <h5 id = "edit-account-status-form-role" class = "status-role text-primary">Regular User</h5>
                        </div>

                        <div class = "mt-4 mb-2 mx-3 row text-center">
                            <div class = "col">
                                <button id = "reject-account-btn" class = "btn btn-white fw-bold m-1 px-5 text-primary rounded-pill">Reject</button>
                            </div>
                            
                            <div class = "col">
                                <button id = "accept-account-btn" class = "btn btn-white fw-bold m-1 px-5 text-primary rounded-pill">Accept</button>
                            </div>
                        </div>

                        <div class = "mb-4 mx-3 row text-center">
                            <div class = "col">
                                <button id = "pend-account-btn" class = "btn btn-white fw-bold px-5 text-primary rounded-pill">Pending</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class = "modal" id = "edit-account-role-modal">
            <div class = "modal-dialog modal-dialog-centered">
                <div class = "bg-primary border border-white border-3 modal-content">
                    <div class = "text-end">
                        <button class = "btn fs-5 fw-bold m-1 shadow-none text-white" data-bs-dismiss = "modal">X</button>
                    </div>

                    <form id = "edit-account-role-form">
                        <div class = "bg-secondary p-2 text-center">
                            <input type = hidden id = "edit-account-role-form-id" name = "accountId">
                            <h4 id = "edit-account-role-form-name" class = "fw-bold pt-2 status-name text-primary">Angeli Dianne Mata</h4>
                            <h5 id = "edit-account-role-form-role" class = "status-role text-primary">Regular User</h5>
                        </div>
                    
                        <div class = "mx-5 my-4">
                            <label for = "edit-account-role" class = "form-label text-white">Role</label>
                            <select id = "edit-account-role" name = "editAccountRole" class = "form-select rounded-pill" required>
                                <option selected value = "inventory-manager">Inventory Manager</option>
                                <option value = "transaction-cashier">Transaction Cashier</option>
                                <option value = "delivery-manager">Delivery Manager</option>
                            </select>
                        </div>

                        <div class = "my-4 mx-3 row text-center">
                            <div class = "col">
                                <button id = "confirm-edit-account-role-btn" type = "submit" class = "btn btn-white fw-bold px-5 rounded-pill text-primary">Confirm</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class = "modal" id = "delete-account-modal">
            <div class = "modal-dialog modal-dialog-centered">
                <div class = "bg-primary border border-white border-3 modal-content">
                    <div class = "text-end">
                        <button class = "btn fs-5 fw-bold m-1 shadow-none text-white" data-bs-dismiss = "modal">X</button>
                    </div>

                    <form id = "delete-account-form">
                        <div class = "bg-secondary p-2 text-center">
                            <input type = hidden id = "delete-account-form-id" name = "accountId">
                            <h4 id = "delete-account-form-name" class = "fw-bold pt-2 status-name text-primary">Angeli Dianne Mata</h4>
                            <h5 id = "delete-account-form-role" class = "status-role text-primary">Regular User</h5>
                        </div>

                        <div class = "m-3 text-center">
                            <span class = "text-white">Are you sure you want to remove this user?</span>
                        </div>

                        <div class = "m-3 row text-center">
                            <div class = "col">
                                <button id = "cancel-delete-account-btn" class = "btn btn-white fw-bold m-1 px-5 text-primary rounded-pill" data-bs-dismiss = "modal">Cancel</button>
                            </div>
                            
                            <div class = "col">
                                <button id = "confirm-delete-account-btn" type = "submit" class = "btn btn-white fw-bold m-1 px-5 text-primary rounded-pill">Yes</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class = "bg-light border border-primary border-5 mt-3 mx-5 table-block text-center table-responsive">
            <table class = "align-middle table table-hover">
                <thead class = "bg-primary table-fixed table-header text-white">
                    <tr>
                        <th scope = "col" class = "w-20">NAME</th>
                        <th scope = "col" class = "w-20">USERNAME</th>
                        <th scope = "col" class = "w-20">ROLE</th>
                        <th scope = "col" class = "w-20">STATUS</th>
                        <th scope = "col" class = "w-10">EDIT</th>
                        <th scope = "col" class = "w-10">DELETE</th>
                    </tr>
                </thead>
                <tbody id = "users-list">
                    {{#each accountDetails}}
                    <tr class = "user">
                        <td id = "name-{{this._id}}">{{getFullName this.firstName this.lastName}}</td>
                        <td id = "username-{{this._id}}">{{this.username}}</td>
                        <td id = "role-{{this._id}}">{{getRole this.role}}</td>
                        <td><button id = "edit-status-{{this._id}}" class = "edit-status btn shadow-none" data-bs-toggle = "modal" data-bs-target = "#edit-account-status-modal"><img src = "{{getStatus this.status}}" class = "edit-account-status"></button></td>
                        <td><button id = "edit-role-{{this._id}}"class = "edit-role btn shadow-none" data-bs-toggle = "modal" data-bs-target = "#edit-account-role-modal"><img src = "/assets/pencil.png" alt = "edit-account" class = "edit-account-role"></button></td>
                        <td><button id = "delete-{{this._id}}" class = "delete btn shadow-none" data-bs-toggle = "modal" data-bs-target = "#delete-account-modal"><img src = "/assets/bin.png" alt = "delete-account" class = "delete-account"></button></td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
    </body>
</html>